// Generated by CoffeeScript 1.6.3
(function(){"use strict";var e;e=angular.module("womentechmakers",["ocupop","ui.directives"]);e.value("header_height",function(){return 0});e.controller("NavCtrl",function(e){e.nav={show_mobile:!1};return e.$on("current_section",function(){return e.nav.show_mobile=!1})});e.factory("EventMap",function(e){var t,n,r,i;r=function(e){return Math.floor(e.valueOf()/1e3)};n=r(new Date);t=r(new Date("2014-12-31"));i="https://google-developers.appspot.com/events/event-markers.public?tag=wtm&start="+n+"&end="+t;if(Modernizr.cors)return e.get(i);i+="&callback=JSON_CALLBACK";return e.jsonp(i)});e.controller("MapCtrl",function(e,t){var n,r;n=Modernizr.svg?"img/marker.svg":"img/marker.png";r=null;e.event_map={show:"map",map_options:{center:new google.maps.LatLng(10,0),zoom:2,minZoom:2,scrollWheel:!1},map:{},events:[],resize:function(){return google.maps.event.trigger(this.map,"resize")},mark:function(t,i){var s,o,u,a=this;u=new google.maps.Marker({position:t.latlng,map:this.map,icon:n});o='<div class="event-infobox">\n  <h3 class="event-title">\n    <a href="https://developers.google.com'+t.defaultEventUrl+'" target="_blank">'+t.name+'</a>\n  </h3>\n  <p class="event-location">'+t.location+"</p>\n</div>";s=new InfoBox({content:o});return google.maps.event.addListener(u,"click",function(){a.selected=i;e.$apply();r!=null&&r.close();r=s;return s.open(a.map,u)})},load:function(){var e=this;t.success(function(t){var n,r,i,s,o,u;e.events=t;o=e.events;u=[];for(r=i=0,s=o.length;i<s;r=++i){n=o[r];u.push(e.mark(n,r))}return u});return this.resize()},clear_selected:function(){return this.selected=null},selected:null};return e.event_map.load()});e.filter("coerceDate",function(){return function(e){return new Date(e*1e3)}})}).call(this);